{% extends "base.html" %}

{% block content %}
<div class="wiki-page">
  <div class="container">
    <h1>Балістика Wiki</h1>
    
    {% if rockets %}
      <p class="intro-text">В нашій базі даних зберігається інформація про наступні типи ракет. 
      Тут ви можете переглянути їх технічні характеристики, параметри удару та інші важливі дані.</p>
      
      <div class="rockets-list">
        {% for rocket in rockets %}
          <div class="rocket-card">
            <h2 class="rocket-title" onclick="toggleRocketInfo('rocket-{{ loop.index }}')">
              {{ rocket.get('Назва', 'Невідома ракета') }}
              <span class="toggle-icon">▼</span>
            </h2>
            
            <div id="rocket-{{ loop.index }}" class="rocket-details" style="display: none;">
              <div class="rocket-specs">
                {% if rocket.get('Країна-виробник') %}
                  <p><strong>Країна:</strong> {{ rocket.get('Країна-виробник') }}</p>
                {% endif %}
                
                {% if rocket.get('Швидкість') %}
                  <p><strong>Швидкість:</strong> {{ rocket.get('Швидкість') }} м/с</p>
                {% endif %}
                
                {% if rocket.get('Вибухова_сила') %}
                  <p><strong>Вибухова сила:</strong> {{ rocket.get('Вибухова_сила') }}</p>
                {% endif %}
                
                {% if rocket.get('Дальність') %}
                  <p><strong>Дальність:</strong> {{ rocket.get('Дальність') }} км</p>
                {% endif %}
              </div>
              
              <div class="rocket-image">
                <!-- Місце для зображення ракети -->
                {% if rocket.get('Зображення') %}
                  <img src="{{ rocket.get('Зображення') }}" alt="{{ rocket.get('Назва', 'Ракета') }}" class="rocket-img">
                {% else %}
                  <!-- Заглушка для зображення -->
                  <div class="image-placeholder">Зображення відсутнє</div>
                {% endif %}
                <!-- 
                  Примітка: додайте шлях до зображення в MongoDB документ як поле 'Зображення'
                  Наприклад: { "Назва": "Точка-У", "Зображення": "/static/img/rockets/tochka-u.jpg" }
                -->
              </div>
              
              {% if rocket.get('Опис') %}
                <div class="rocket-description">
                  <p>{{ rocket.get('Опис') }}</p>
                </div>
              {% endif %}
              
              <div class="additional-info">
                {% for key, value in rocket.items() %}
                  {% if key not in ['_id', 'Назва', 'Країна-виробник', 'Швидкість', 'Вибухова_сила', 'Дальність', 'Опис', 'Зображення'] and value %}
                    <p><strong>{{ key }}:</strong> {{ value }}</p>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="no-data">
        <p>На даний момент інформація про ракети ще не завантажена в систему. Данi будуть з'являтися поступово у процесі оновлення системи.</p>
        <p>Залишайтеся з нами!</p>
      </div>
    {% endif %}
  </div>
</div>

<style>
  .intro-text {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    color: #444;
  }
  
  .rockets-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .rocket-card {
    background-color: #f9f9f9;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
  }
  
  .rocket-card:hover {
    transform: translateY(-5px);
  }
  
  .rocket-title {
    color: #3e5f3e;
    margin-top: 0;
    border-bottom: 2px solid #e0e0e0;
    padding-bottom: 10px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .toggle-icon {
    font-size: 0.8em;
    transition: transform 0.3s ease;
  }
  
  .rocket-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-top: 1rem;
    overflow: hidden;
    transition: height 0.3s ease;
  }
  
  .rocket-specs {
    background-color: #f0f8f0;
    padding: 1rem;
    border-radius: 8px;
  }
  
  .rocket-image {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #f5f5f5;
    border-radius: 8px;
    overflow: hidden;
    min-height: 200px;
  }
  
  .rocket-img {
    max-width: 100%;
    max-height: 300px;
    object-fit: contain;
  }
  
  .image-placeholder {
    color: #999;
    text-align: center;
    font-style: italic;
    padding: 2rem;
  }
  
  .rocket-description {
    grid-column: span 2;
    margin-top: 1rem;
    font-style: italic;
    color: #555;
  }
  
  .additional-info {
    grid-column: span 2;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px dashed #ccc;
  }
  
  .no-data {
    background-color: #f0f8f0;
    padding: 2rem;
    border-radius: 10px;
    text-align: center;
    color: #555;
  }
  
  @media (max-width: 768px) {
    .rocket-details {
      grid-template-columns: 1fr;
    }
    
    .rocket-description, 
    .additional-info,
    .rocket-image {
      grid-column: span 1;
    }
  }
</style>

<script>
  function toggleRocketInfo(rocketId) {
    const rocketElement = document.getElementById(rocketId);
    const rocketCard = rocketElement.closest('.rocket-card');
    const toggleIcon = rocketCard.querySelector('.toggle-icon');
    
    if (rocketElement.style.display === 'none') {
      rocketElement.style.display = 'grid';
      toggleIcon.style.transform = 'rotate(180deg)';
    } else {
      rocketElement.style.display = 'none';
      toggleIcon.style.transform = 'rotate(0deg)';
    }
  }
</script>
{% endblock %}